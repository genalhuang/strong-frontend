# https
- HTTPS 为 HTTP 增加了机密性、完整性，身份认证和不可否认。
- HTTPS 协议的主要功能基本都依赖于 TLS/SSL 协议，TLS/SSL 的功能实现主要依赖于三类基本算法：散列函数 、对称加密和非对称加密，利用非对称加密实现身份认证和密钥协商，对称加密算法采用协商的密钥对数据加密，基于散列函数验证信息的完整性。


## 对称加密
对称加密 很好理解，就是指加密和解密时使用的密钥都是同一个
常见的有：AES-128、AES-192、AES-256 和 ChaCha20。

## 非对称加密
一个叫 公钥（public key），一个叫 私钥（private key）。两个密钥是不同的，不对称，公钥可以公开给任何人使用，而私钥必须严格保密。公钥和私钥有个特别的 单向 性，虽然都可以用来加密解密，但公钥加密后只能用私钥解密，反过来，私钥加密后也只能用公钥解密。

常见的有： RSA、DH、DSA、ECC 等。

## 混合加密系统和会话密钥
在通信刚开始的时候使用非对称算法，比如 RSA、ECDHE，首先解决密钥交换的问题。
然后用随机数产生对称算法使用的 会话密钥（session key），再用公钥加密。因为会话密钥很短，通常只有 16 字节或 32 字节，所以慢一点也无所谓。对方拿到密文后用私钥解密，取出会话密钥。这样，双方就实现了对称密钥的安全交换，后续就不再使用非对称加密，全都使用对称加密。

## 数字摘要
### 摘要算法（散列函数、哈希函数）
- 单向性 和 雪崩效应，输入的微小不同会导致输出的剧烈变化
摘要算法理解成特殊的单向加密算法，它只有算法，没有密钥，加密后的数据无法解密，不能从摘要逆推出原文。
摘要算法能够生成 16 字节和 20 字节长度的数字摘要。
摘要算法保证了 数字摘要 和原文是完全等价的。所以，我们只要在原文后附上它的摘要，就能够保证数据的完整性。
常见的有：MD5、SHA-1
真正的完整性必须要建立在机密性之上，在混合加密系统里用会话密钥加密消息和摘要，这样黑客无法得知明文，也就没有办法动手脚了。这有个术语，叫哈希消息认证码（HMAC）。

## 数字签名
非对称加密里的 私钥，使用私钥再加上摘要算法，就能够实现 数字签名，
数字签名的原理其实很简单，就是把公钥私钥的用法反过来，之前是公钥加密、私钥解密，现在是私钥加密、公钥解密。
私钥只加密原文的数字摘要。
签名和公钥一样完全公开，任何人都可以获取。但这个签名只有用私钥对应的公钥才能解开，拿到摘要后，再比对原文验证完整性，就可以像签署文件一样证明消息确实是你发的。

### 数字签名的过程
发送方：明文 ---> 数字摘要处理(得到数字摘要A) ---> 私钥加密得到数字签名，连带明文一起发送。

接收方：收到明文，加密后的摘要（数字签名） ---> 用公钥解密，得要摘要A （这里可以确认文件是由发送方发来的）--->用同样的摘要算法转换明文--->得到摘要B
比较摘要A和摘要B，若相同说明是传输过程没有被修改过，是真实文件。

（1）为什么要对摘要加密后再发送？为什么不直接发摘要？摘要不可以逆向推导原文，摘要泄露了也没事……

答：摘要泄露是没事，但不怀好意的人的目的可能并不在想要窃听你发送了什么，而是想伪造发送的内容让你相信。通过同时替换摘要和内容，很简单就实现了。所以摘要需要经过加密，不怀好意的人没有私钥，无法完成加密。或者说你收到的东西只要能用公钥解密，你才认为这个东西确实是对应私钥持有者完成的。这叫做当事人不可抵赖，同时别人无法仿冒。（数字签名：不可抵赖+无法仿冒）

（2）为什么不直接对内容加密，而是先生成摘要，对摘要加密？

答：可能是内容很长吧，直接加密算半天！摘要算法可以把无限长的内容输出成长度固定的摘要，再进行加密时间就是可以预估的

## CA数字证书（ssl证书）
解决公钥的信任 问题
组成
- 对象的名称（人、服务器、组织等）；
- 过期时间；
- 证书发布者（由谁为证书担保）；
- 来自证书发布者的数字签名。
