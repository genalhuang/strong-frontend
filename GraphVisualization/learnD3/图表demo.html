<html>

<head>
  <meta charset="utf-8">
  <title>HelloWorld</title>
</head>
<style>
  .axis path,
  .axis line {
    fill: none;
    stroke: black;
    shape-rendering: crispEdges;
  }

  .axis text {
    font-family: sans-serif;
    font-size: 11px;
  }
</style>

<body>
  <svg>
    <rect></rect>
    <rect></rect>
  </svg>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script>
    // 创建svg
    // var svg = d3.select('body')
    //   .append('svg')
    //   .attr('width', 300)
    //   .attr('height', 300)



    // var rectHeight = 25;
    // var dataset = [250, 210, 170, 130, 90];  //数据（表示矩形的宽度）

    // svg.selectAll('rect')
    //   .data(dataset)// 为元素绑定数据
    //   .enter() //指定选择集的enter部分
    //   .append('rect')
    //   .attr('x', 20)
    //   .attr('y', function (d, i) {
    //     return i * rectHeight
    //   })
    //   .attr('width', function (d) {
    //     return d
    //   })
    //   .attr('height', rectHeight - 2)
    //   .attr('fill', 'steelblue')

    // svg.selectAll("rect")   //选择svg内所有的矩形
    // .data(dataset)  //绑定数组
    // .enter()        //指定选择集的enter部分
    //  .append("rect") //添加足够数量的矩形元素
    // 这段代码以后会常常出现在 D3 的代码中，请务必牢记。目前不深入讨论它的作用机制是怎样的，只需要读者牢记，当：
    // 有数据，而没有足够图形元素的时候，使用此方法可以添加足够的元素。


    // 下面请理解 update enter 和 exit
    // svg.append('rect')
    // let update = svg.selectAll('rect')
    //                 .data(dataset)
    // update
    // .attr('y', function (d, i) {
    //   return i * rectHeight
    // })
    // .attr('width', function (d) {
    //   return d
    // })
    // .attr('height', rectHeight - 2)
    // .attr('fill', 'steelblue')


    // svg.selectAll('rect')
    // .data(dataset)
    // .enter()
    // .append('rect')
    // .attr('y', function (d, i) {
    //   return i * rectHeight
    // })
    // .attr('width', function (d) {
    //   return d
    // })
    // .attr('height', rectHeight - 2)
    // .attr('fill', 'steelblue')



    // 线形比例尺
    // var dataset = [0,1,2,3];
    // var min = d3.min(dataset)
    // var max = d3.max(dataset)

    // var linear = d3.scale.linear()
    //               .domain([min,max])
    //               .range([0,300])

    // console.log(linear(0.9))
    // console.log(linear(2.3))
    // console.log(linear(1.5))
    // console.log(linear(3.2))


    // 序数比例尺
    // var index = [0, 1, 2, 3, 4];
    // var color = ["red", "blue", "green", "yellow", "black"];

    // var ordinal = d3.scale.ordinal()
    //   .domain(index)
    //   .range(color);

    // console.log(ordinal(0)); //返回 red
    // ordinal(2); //返回 green
    // ordinal(4); //返回 black

    // 比例尺画矩形
    // var dataset = [2.5,2.1,1.7,1.3,0.9]
    // var linear = d3.scale.linear()
    //               .domain([0,d3.max(dataset)])
    //               .range([0,250])

    // var rectHeight  = 25
    // var svg = d3.select('body')
    //   .append('svg')
    //   .attr('width', 300)
    //   .attr('height', 300)

    // svg.selectAll('rect')
    //     .data(dataset)
    //     .enter()
    //     .append('rect')
    //     .attr('x',20)
    //     .attr('y', function(d,i) {
    //       return  i * rectHeight;
    //     })
    //     .attr('width',function(d) {
    //       return linear(d)
    //     })
    //     .attr('height',rectHeight-2)
    //     .attr('fill','pink')


    var svg = d3.select('body')
      .append('svg')
      .attr('width', 300)
      .attr('height', 300)

    // 新增坐标轴
    var dataset = [2.5, 2.1, 1.7, 1.3, 0.9]
    var linear = d3.scale.linear()
      .domain([0, d3.max(dataset)])
      .range([0, 250])

    var axis = d3.svg.axis()
      .scale(linear)// 指定比例尺
      .orient('bottom')// 指定刻度方向
      .ticks(8) // 指定刻度的数量

    // d3.svg.axis() ：D3 中坐标轴的组件，能够在 SVG 中生成组成坐标轴的元素。
    // scale() ：指定比例尺。
    // orient() ：指定刻度的朝向，bottom 表示在坐标轴的下方显示。
    // ticks() ：指定刻度的数量。
    svg.append("g")
      .attr("class", "axis")
      .attr("transform", "translate(20,130)")
      .call(axis);
  </script>
</body>

</html>